generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Site {
  id           String        @id @default(cuid())
  slug         String        @unique
  name         String
  createdAt    DateTime      @default(now())
  measurements Measurement[]
}

model Measurement {
  id          String   @id @default(cuid())
  siteId      String
  site        Site     @relation(fields: [siteId], references: [id])
  createdAt   DateTime @default(now())

  probeName   String
  pingTarget  String?
  httpTarget  String?
  dnsServer   String?

  latencyMs   Float?
  jitterMs    Float?
  lossPct     Float?

  dnsLookupMs Float?
  httpTtfbMs  Float?

  @@index([siteId, createdAt])
  @@index([probeName, createdAt])
}
